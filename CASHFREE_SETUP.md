# Cashfree Payment Setup Guide

## Issue: Invalid payment_session_id Error

You're getting this error because the app is using mock/fake payment session IDs instead of real ones from Cashfree.

## Root Cause

The payment session ID `session_1758357623965` is generated by the fallback mock code in `src/utils/cashfreeApi.js` when the real Cashfree API call fails due to missing credentials.

## Solution: Set Up Cashfree Credentials

### Step 1: Get Cashfree Credentials
1. Go to [Cashfree Merchant Dashboard](https://merchant.cashfree.com/)
2. Sign up or log in to your account
3. Navigate to Developers > API Keys
4. Copy your App ID and Secret Key

### Step 2: Set Environment Variables

#### For Local Development:
Create a `.env` file in your project root with:

```env
# Frontend credentials (for React app)
REACT_APP_CASHFREE_APP_ID=your_actual_app_id
REACT_APP_CASHFREE_SECRET_KEY=your_actual_secret_key

# Backend credentials (for Netlify functions)
CASHFREE_APP_ID=your_actual_app_id
CASHFREE_SECRET_KEY=your_actual_secret_key
CASHFREE_ENVIRONMENT=production
```

#### For Netlify Deployment:
1. Go to your Netlify dashboard
2. Navigate to Site Settings > Environment Variables
3. Add these variables:
   - `CASHFREE_APP_ID` = your_actual_app_id
   - `CASHFREE_SECRET_KEY` = your_actual_secret_key
   - `CASHFREE_ENVIRONMENT` = production

### Step 3: Test the Setup

After setting up credentials:
1. Restart your development server
2. Try making a payment
3. Check the browser console for any errors
4. The payment session ID should now be a real Cashfree session ID

## Current Flow (Without Credentials)

```
User clicks Pay → createOrder() → Netlify function fails → Mock session ID → Cashfree rejects it
```

## Fixed Flow (With Credentials)

```
User clicks Pay → createOrder() → Netlify function succeeds → Real session ID → Cashfree accepts it
```

## Testing

You can test with Cashfree's sandbox environment first:
1. Use sandbox credentials from Cashfree dashboard
2. Set `CASHFREE_ENVIRONMENT=sandbox` in your environment variables
3. Test payments with sandbox mode

## Security Note

- Never commit your `.env` file to version control
- Keep your secret keys secure
- Use different credentials for development and production
